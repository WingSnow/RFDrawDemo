<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>
	<title>抽奖活动</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<meta name="description" content="">

	<link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
	<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.css">

	<style>
		.demos-content-padded{
			padding:15px;
		}
		.result_box{
			text-align: center;
			font-size: 34px;
			color: #3cc51f;
			font-weight: 400;
			margin: 50px 15%;
		}
	</style>
</head> 
<script type="text/javascript">  
<<<<<<< HEAD
//抽奖数据，以英文逗号分隔  
var alldata = "郑嘉颖,岑剑雯,王涛,陈虹,曾稳,张军,梁润记,陈嘉雯,陈子豪,李浩锐,潘斯妍,郭诗琪,罗梦竹,施维,张浩松,万国彬,杜姝姝,蔡丽芸,陈冬文,肖月瑶,杨玲,胡泉,李家辉,詹力榛,刘琴,杜素娟,王律可,周艳辉,刘静怡,叶蕾,黄雅君,谭锦祺,陈国鸿,刘清淮,高喆,霍文裕,肖俊,孟祥存,容安安,张锦明,梁智华,王鑫,罗志雄,尹相顺,梁瑞泉,王申,谢晓静,胡骏,周力钊";    
var alldataarr = alldata.split(",");    
var num = alldataarr.length-1;  
=======
var alldata,allHope;
var alldataarr,allHopearr;

Array.prototype.remove = function(val) {
	for(var i=0; i< this.length; i++) {
    if(this[i] == val) {
      this.splice(i,1);
      break;
    }
  }
};

$(document).ready(function(){
	htmlobj = $.ajax({url:"./data/member.txt",async:false});
	alldata = htmlobj.responseText;
	alldataarr = alldata.split(",");
	num = alldataarr.length;
	console.log(alldataarr);
	htmlobj = $.ajax({url:"./data/hope.txt",async:false});
	allHope = htmlobj.responseText;
	allHopearr = allHope.split(";"); 
	console.log(allHopearr);
});
>>>>>>> parent of eb0f4d7... Update index.html
var timer;  
function change(){     
<<<<<<< HEAD
    document.getElementById("result").innerHTML = alldataarr[GetRnd(0,num)];     
}  
function start(){    
	document.getElementById("start").className = "weui-btn weui-btn_disable weui-btn_default";
	document.getElementById("stop").className = "weui-btn weui-btn_warn";
=======
    document.getElementById("result").innerHTML = alldataarr[GetRnd(0,num-1)];
}
function start(){
	if(status != 0){
		return;
	}
	status = 1;
	$("#start").attr("class","weui-btn weui-btn_disable weui-btn_default");
	$("#stop").attr("class","weui-btn weui-btn_warn");
	
>>>>>>> parent of eb0f4d7... Update index.html
    clearInterval(timer);     
    timer = setInterval('change()',46); //随机数据变换速度，越小变换的越快     
}  
function ok(){     
	document.getElementById("stop").className = "weui-btn weui-btn_disable weui-btn_default";
	document.getElementById("start").className = "weui-btn weui-btn_primary";
    clearInterval(timer);     
    //以下代码表示获得奖的，不能再获奖了。  重置刷新页面即可。  
    alldata = alldata.replace(document.getElementById("result").innerHTML,"").replace(",,",",");  
    // 去掉前置，最末尾的,  
    if (alldata.substr(0,1)==",")  
    {  
      alldata = alldata.substr(1,alldata.length);  
    }  
    if (alldata.substr(alldata.length-1,1)==",")  
    {  
      alldata = alldata.substring(0,alldata.length-1);  
    }  
    alldataarr = alldata.split(",");    
    num = alldataarr.length-1;    
}     
function GetRnd(min,max){     
    return parseInt(Math.random()*(max-min+1));     
}  
</script>  
<body> 
	<div class = "demos-content-padded">
		<div class="result_box" id="result">点击开始</div> 
		<a href="javascript:;" class="weui-btn weui-btn_primary" onclick="start()" id="start">开始</a>
		<a href="javascript:;" class="weui-btn weui-btn_disable weui-btn_default" onclick="ok()" id="stop">停止</a>
	</div>
</body>     
</html>  
